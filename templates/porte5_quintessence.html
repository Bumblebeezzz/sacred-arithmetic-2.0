{% extends "base.html" %}

{% block title %}Porte 5 - Quintessence{% endblock %}

{% block content %}
<div class="portal-page quintessence-portal">
    <header class="portal-header">
        <h1>La Quintessence</h1>
        <div class="portal-symbol">
            <i class="fas fa-star"></i>
            <span class="portal-number">5</span>
        </div>
    </header>

    <section class="portal-content">
        <div class="wisdom-container">
            <div class="wisdom-card">
                <h2>L'√âtoile √† Cinq Branches</h2>
                <p>Le nombre 5 repr√©sente l'harmonie parfaite entre l'esprit et la mati√®re, le microcosme refl√©tant le macrocosme.</p>
                <div class="pentagram-container">
                    <div class="pentagram"></div>
                    <div class="pentagram-overlay"></div>
                </div>
            </div>

            <div class="wisdom-card">
                <h2>Les Cinq Sens Subtils</h2>
                <div class="senses-grid">
                    <div class="sense" data-sense="vision">
                        <i class="fas fa-eye"></i>
                        <span>Vision √âth√©rique</span>
                    </div>
                    <div class="sense" data-sense="audition">
                        <i class="fas fa-ear-listen"></i>
                        <span>Audition C√©leste</span>
                    </div>
                    <div class="sense" data-sense="toucher">
                        <i class="fas fa-hand-sparkles"></i>
                        <span>Toucher Subtil</span>
                    </div>
                    <div class="sense" data-sense="gout">
                        <i class="fas fa-tongue"></i>
                        <span>Go√ªt Divin</span>
                    </div>
                    <div class="sense" data-sense="odorat">
                        <i class="fas fa-nose"></i>
                        <span>Odorat Mystique</span>
                    </div>
                </div>
            </div>

            <div class="wisdom-card interactive">
                <h2>Les Cinq √âl√©ments Subtils</h2>
                <div class="elements-subtle">
                    <div class="element-subtle" data-element="ether">
                        <div class="element-symbol">üåå</div>
                        <span>√âther</span>
                    </div>
                    <div class="element-subtle" data-element="air">
                        <div class="element-symbol">üí®</div>
                        <span>Air</span>
                    </div>
                    <div class="element-subtle" data-element="feu">
                        <div class="element-symbol">üî•</div>
                        <span>Feu</span>
                    </div>
                    <div class="element-subtle" data-element="eau">
                        <div class="element-symbol">üíß</div>
                        <span>Eau</span>
                    </div>
                    <div class="element-subtle" data-element="terre">
                        <div class="element-symbol">üåç</div>
                        <span>Terre</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="meditation-section">
        <h2>M√©ditation sur la Quintessence</h2>
        <p>√âlevez votre conscience √† travers les cinq niveaux de l'√™tre.</p>
        <div class="quintessence-meditation">
            <div class="meditation-levels">
                <div class="level" data-level="1">Physique</div>
                <div class="level" data-level="2">√âth√©rique</div>
                <div class="level" data-level="3">Astral</div>
                <div class="level" data-level="4">Mental</div>
                <div class="level" data-level="5">Causal</div>
            </div>
            <button id="startMeditation">Commencer la M√©ditation</button>
            <div id="meditationTimer">05:55</div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_css %}
<style>
.quintessence-portal {
    background: linear-gradient(135deg, var(--portal-5), var(--color-black));
    padding: 2rem;
}

.pentagram-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 2rem auto;
}

.pentagram {
    position: absolute;
    width: 100%;
    height: 100%;
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    background: var(--color-gold);
    animation: rotate 20s linear infinite;
}

.pentagram-overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    clip-path: polygon(50% 5%, 59% 35%, 95% 35%, 68% 54%, 77% 85%, 50% 67%, 23% 85%, 32% 54%, 5% 35%, 41% 35%);
    background: rgba(0, 0, 0, 0.7);
    animation: rotate 20s linear infinite reverse;
}

.senses-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin: 2rem 0;
}

.sense {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    border: 1px solid var(--color-gold);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.sense i {
    font-size: 2rem;
    color: var(--color-gold);
    margin-bottom: 0.5rem;
}

.sense:hover {
    transform: scale(1.1);
    box-shadow: 0 0 20px var(--color-gold);
}

.elements-subtle {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 2rem 0;
}

.element-subtle {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    border: 1px solid var(--color-gold);
    border-radius: 50%;
    width: 80px;
    height: 80px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.element-symbol {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.element-subtle:hover {
    transform: scale(1.1) rotate(360deg);
    box-shadow: 0 0 20px var(--color-gold);
}

.meditation-levels {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin: 2rem 0;
}

.level {
    padding: 1rem;
    text-align: center;
    border: 1px solid var(--color-gold);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(0, 0, 0, 0.7);
}

.level:hover {
    transform: translateX(20px);
    background: rgba(255, 215, 0, 0.1);
}

#meditationTimer {
    font-size: 2rem;
    font-family: 'Cinzel Decorative', cursive;
    color: var(--color-gold);
    margin: 1rem 0;
    text-align: center;
}

#startMeditation {
    display: block;
    margin: 2rem auto;
    background: var(--color-gold);
    color: var(--color-black);
    border: none;
    padding: 1rem 2rem;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'EB Garamond', serif;
    font-size: 1.1rem;
    transition: all 0.3s ease;
}

#startMeditation:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px var(--color-gold);
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const senses = document.querySelectorAll('.sense');
    const elements = document.querySelectorAll('.element-subtle');
    const levels = document.querySelectorAll('.level');
    let meditationInterval;
    let activeLevel = 0;

    senses.forEach(sense => {
        sense.addEventListener('click', function() {
            senses.forEach(s => s.style.transform = 'scale(1)');
            this.style.transform = 'scale(1.1)';
        });
    });

    elements.forEach(element => {
        element.addEventListener('click', function() {
            elements.forEach(e => e.style.transform = 'scale(1)');
            this.style.transform = 'scale(1.1) rotate(360deg)';
        });
    });

    levels.forEach((level, index) => {
        level.addEventListener('click', function() {
            levels.forEach(l => l.style.background = 'rgba(0, 0, 0, 0.7)');
            this.style.background = 'rgba(255, 215, 0, 0.1)';
            activeLevel = index;
        });
    });

    document.getElementById('startMeditation').addEventListener('click', function() {
        let time = 355; // 5:55 en secondes
        this.disabled = true;
        
        meditationInterval = setInterval(() => {
            const minutes = Math.floor(time / 60);
            const seconds = time % 60;
            document.getElementById('meditationTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (time % 71 === 0) { // Change de niveau toutes les 71 secondes
                levels.forEach(l => l.style.background = 'rgba(0, 0, 0, 0.7)');
                levels[activeLevel].style.background = 'rgba(255, 215, 0, 0.1)';
                activeLevel = (activeLevel + 1) % 5;
            }
            
            if (time === 0) {
                clearInterval(meditationInterval);
                this.disabled = false;
                levels.forEach(l => l.style.background = 'rgba(0, 0, 0, 0.7)');
            }
            time--;
        }, 1000);
    });
});
</script>
{% endblock %} 